<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lebanon Tourism Infrastructure Analysis - Data Visualization</title>
    <meta name="description" content="Interactive visualization showing tourism infrastructure concentration in Lebanon, with Beirut and Mount Lebanon dominating 51% of all facilities.">
    <meta name="author" content="MSBA 325 Assignment 3">
    
    <!-- Plotly.js from CDN -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js" charset="utf-8"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: white;
            overflow: hidden;
        }
        
        #visualization {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="visualization"></div>

    <script>
        // Embedded CSV data as JavaScript array
        const data = [
            {"Governorate": "Baabda", "Total_Facilities": 631},
            {"Governorate": "Akkar", "Total_Facilities": 618},
            {"Governorate": "Matn", "Total_Facilities": 383},
            {"Governorate": "Baalbek-Hermel", "Total_Facilities": 376},
            {"Governorate": "Mount Lebanon", "Total_Facilities": 337},
            {"Governorate": "Tyre", "Total_Facilities": 309},
            {"Governorate": "Kesrouane", "Total_Facilities": 292},
            {"Governorate": "Zahle", "Total_Facilities": 285},
            {"Governorate": "Byblos", "Total_Facilities": 259},
            {"Governorate": "Nabatieh", "Total_Facilities": 259},
            {"Governorate": "Sidon", "Total_Facilities": 249},
            {"Governorate": "Zgharta", "Total_Facilities": 220},
            {"Governorate": "Batroun", "Total_Facilities": 213},
            {"Governorate": "Aley", "Total_Facilities": 205},
            {"Governorate": "Miniyeh-Danniyeh", "Total_Facilities": 204},
            {"Governorate": "Bsharri", "Total_Facilities": 184},
            {"Governorate": "Western Beqaa", "Total_Facilities": 178},
            {"Governorate": "Tripoli", "Total_Facilities": 175},
            {"Governorate": "Hermel", "Total_Facilities": 145},
            {"Governorate": "North", "Total_Facilities": 141},
            {"Governorate": "South", "Total_Facilities": 125},
            {"Governorate": "Bint Jbeil", "Total_Facilities": 120},
            {"Governorate": "Hasbaya", "Total_Facilities": 104},
            {"Governorate": "Marjeyoun", "Total_Facilities": 82},
            {"Governorate": "Beqaa", "Total_Facilities": 52}
        ];

        // Extract data for plotting
        const governorates = data.map(d => d.Governorate);
        const facilities = data.map(d => d.Total_Facilities);
        
        // Color strategy: highlight top 2
        const colors = facilities.map((val, idx) => {
            if (idx === 0) return '#0066CC';  // Blue for #1
            if (idx === 1) return '#00A896';  // Teal for #2
            return '#D3D3D3';  // Gray for rest
        });

        // Calculate statistics for annotations
        const top2Total = facilities[0] + facilities[1];
        const midTotal = facilities[2] + facilities[3] + facilities[4];
        const restTotal = facilities.slice(5).reduce((a, b) => a + b, 0);
        const totalAll = facilities.reduce((a, b) => a + b, 0);
        const top2Percentage = Math.round((top2Total / totalAll) * 100);

        // Create bar traces
        const traces = governorates.map((gov, idx) => ({
            type: 'bar',
            x: [gov],
            y: [facilities[idx]],
            marker: {
                color: colors[idx],
                line: { width: 0 }
            },
            text: [facilities[idx]],
            textposition: 'outside',
            textfont: {
                size: 13,
                color: '#2C3E50',
                family: 'Arial, sans-serif',
                weight: 'bold'
            },
            hovertemplate: `<b>${gov}</b><br>Total Facilities: ${facilities[idx]}<extra></extra>`,
            showlegend: false,
            width: 0.7
        }));

        // Calculate y-axis parameters
        const maxVal = Math.max(...facilities);
        let dtick;
        if (maxVal <= 50) dtick = 10;
        else if (maxVal <= 200) dtick = 25;
        else if (maxVal <= 500) dtick = 50;
        else dtick = 100;
        const ymax = Math.ceil(maxVal / dtick) * dtick;

        // Layout configuration
        const layout = {
            template: 'plotly_white',
            plot_bgcolor: 'rgba(0,0,0,0)',
            paper_bgcolor: 'white',
            showlegend: false,
            margin: { l: 100, r: 140, t: 260, b: 220 },
            height: 750,
            width: 1500,
            bargap: 0.30,
            
            annotations: [
                // Main title
                {
                    xref: 'paper', yref: 'paper',
                    x: 0, y: 1.18,
                    text: "<b>Beirut and Mount Lebanon Dominate Lebanon's Tourism Infrastructure</b>",
                    showarrow: false,
                    font: { size: 28, color: '#1A252F', family: 'Arial, sans-serif' },
                    xanchor: 'left',
                    yanchor: 'top',
                    align: 'left'
                },
                // Subtitle
                {
                    xref: 'paper', yref: 'paper',
                    x: 0, y: 1.08,
                    text: "These two governorates account for the majority of hotels, restaurants, cafes, and guest houses",
                    showarrow: false,
                    font: { size: 16, color: '#5D6D7E', family: 'Arial, sans-serif' },
                    xanchor: 'left',
                    yanchor: 'top',
                    align: 'left'
                },
                // Context line
                {
                    xref: 'paper', yref: 'paper',
                    x: 0, y: 1.00,
                    text: "Together they host 1,249 tourism facilities — nearly double the combined total of the next 5 governorates",
                    showarrow: false,
                    font: { size: 14, color: '#85929E', family: 'Arial, sans-serif', style: 'italic' },
                    xanchor: 'left',
                    yanchor: 'top',
                    align: 'left'
                },
                // Leading region label
                {
                    x: governorates[0],
                    y: facilities[0] + (ymax * 0.08),
                    text: `<b>LEADING REGION</b><br>${facilities[0]} facilities`,
                    showarrow: false,
                    font: { size: 11, color: '#0052A3', family: 'Arial, sans-serif' },
                    xanchor: 'right',
                    yanchor: 'bottom'
                },
                // Second region label
                {
                    x: governorates[1],
                    y: facilities[1] + (ymax * 0.08),
                    text: `<b>SECOND REGION</b><br>${facilities[1]} facilities`,
                    showarrow: false,
                    font: { size: 11, color: '#008C7A', family: 'Arial, sans-serif' },
                    xanchor: 'left',
                    yanchor: 'bottom'
                },
                // Regional distribution analysis
                {
                    xref: 'paper', yref: 'paper',
                    x: 0.25, y: 0.65,
                    text: `<b>Regional Distribution Analysis:</b><br><br>` +
                          `• <b>Top 2 governorates</b> (Baabda & Akkar): ${top2Total} facilities (${top2Percentage}% of total)<br>` +
                          `• <b>Next 3 governorates</b>: ${midTotal} facilities (${Math.round((midTotal/totalAll)*100)}%)<br>` +
                          `• <b>Remaining ${governorates.length - 5} governorates</b>: ${restTotal} facilities (${Math.round((restTotal/totalAll)*100)}%)<br><br>` +
                          `<i>This concentration reveals significant regional inequality in tourism infrastructure,<br>` +
                          `with implications for economic development and visitor distribution across Lebanon.</i>`,
                    showarrow: false,
                    font: { size: 11, color: '#2C3E50', family: 'Arial, sans-serif' },
                    xanchor: 'left',
                    yanchor: 'middle',
                    align: 'left'
                },
                // Key insight box
                {
                    xref: 'paper', yref: 'paper',
                    x: 0.98, y: 0.92,
                    text: `<b>KEY INSIGHT</b><br><br>` +
                          `${top2Percentage}% of all tourism facilities<br>` +
                          `are concentrated in just<br>` +
                          `2 out of ${governorates.length} governorates<br><br>` +
                          `<i>This represents a significant<br>` +
                          `opportunity for regional<br>` +
                          `development and tourism<br>` +
                          `diversification</i>`,
                    showarrow: false,
                    font: { size: 11, color: '#C0392B', family: 'Arial, sans-serif' },
                    xanchor: 'right',
                    yanchor: 'top',
                    align: 'left'
                },
                // Methodology footer
                {
                    xref: 'paper', yref: 'paper',
                    x: 0, y: -0.38,
                    text: "<b>Methodology:</b> Total facilities = Hotels + Restaurants + Cafes + Guest Houses  |  <b>Data Source:</b> Lebanon Tourism Dataset 2024",
                    showarrow: false,
                    font: { size: 11, color: '#85929E', family: 'Arial, sans-serif' },
                    xanchor: 'left',
                    yanchor: 'top',
                    align: 'left'
                }
            ],
            
            xaxis: {
                title: '',
                tickangle: -45,
                showgrid: false,
                showline: true,
                linewidth: 1,
                linecolor: '#BDC3C7',
                ticks: '',
                tickfont: { size: 12, color: '#2C3E50', family: 'Arial, sans-serif' }
            },
            
            yaxis: {
                title: {
                    text: 'Number of Tourism Facilities',
                    font: { size: 14, color: '#5D6D7E', family: 'Arial, sans-serif' },
                    standoff: 20
                },
                showgrid: false,
                showline: true,
                linewidth: 1,
                linecolor: '#BDC3C7',
                zeroline: false,
                tickmode: 'linear',
                dtick: dtick,
                range: [0, ymax * 1.35],
                tickfont: { size: 12, color: '#5D6D7E', family: 'Arial, sans-serif' },
                ticks: ''
            }
        };

        // Create the plot - hide all controls
        Plotly.newPlot('visualization', traces, layout, {
            responsive: true,
            displayModeBar: false,
            displaylogo: false
        });
    </script>
</body>
</html>